# 压力测试 & 初步优化记录  
工具：Apache-JMeter-4.0

## 1. 用户登录  
（1000个并发用户） 
| 项目 | 优化前数据 |  优化后数据 |
| :-: | :-: | :-: | 
| 平均响应时间 | 2200ms |  1979ms |
| 错误率 | 0.00% |  0.00% |
| Throughput | 139.3/s | 156.7/s |
| Received data | 26.92KB/s | 30.29KB/s |
| Sent data | 30.31KB/s | 34.11KB/s |  
  
优化内容： 
1. 删除后端为了debug而打印的信息
2. 用户用户名密码输入正确时，不使用User（Java对象）取得用户名，而是直接返回前端传回的username  


----

## 2. 请求未读私信列表  
（1000个并发用户）
| 项目 | 优化前数据 |  优化后数据 |
| :-: | :-: | :-: | 
| 平均响应时间 | 2350ms |  2298ms |
| 错误率 | 0.00% |  0.00% |
| Throughput | 99.5/s | 141.4/s |
| Received data | 15.45KB/s | 21.96KB/s |
| Sent data | 21.08KB/s | 29.96KB/s |  
  
优化内容： 
1. 删除后端为了debug而打印的信息
3. 换用时间复杂度更低的方法来判断数组中是否含有某个元素
4. 将两个循环压缩为一个循环，减少了不必要的局部变量、降低了比较次数
5. 在循环外初始化要重复利用的局部变量（如SimpleDateFormat）

----

## 3. 请求用户粉丝列表
（1000个并发用户）  
| 项目 | 优化前数据 |  优化后数据 |
| :-: | :-: | :-: | 
| 平均响应时间 | 3052ms |  2556ms |
| 错误率 | 0.00% |  0.00% |
| Throughput | 139.5/s | 145.3/s |
| Received data | 21.66KB/s | 32.56KB/s |
| Sent data | 28.18KB/s | 29.36KB/s |  
  
优化内容：  
1. 删除后端为了debug而打印的信息
2. 将while循环改为for-each循环  
3. 减少了function call
4. 减少了局部变量  